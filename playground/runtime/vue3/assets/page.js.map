{"version":3,"file":"page.js","sources":["../../src/utils/index.ts","../../src/utils/request.ts","../../src/page/App.vue","../../src/page/main.ts"],"sourcesContent":["/*\n * Tencent is pleased to support the open source community by making TMagicEditor available.\n *\n * Copyright (C) 2021 THL A29 Limited, a Tencent company.  All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { MApp } from '@tmagic/schema';\n\nexport const getLocalConfig = (): MApp[] => {\n  const configStr = localStorage.getItem('magicUiConfig');\n  if (!configStr) return [];\n  try {\n    // eslint-disable-next-line no-eval\n    return [eval(`(${configStr})`)];\n  } catch (err) {\n    return [];\n  }\n};\n","/*\n * Tencent is pleased to support the open source community by making TMagicEditor available.\n *\n * Copyright (C) 2021 THL A29 Limited, a Tencent company.  All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { App } from 'vue';\nimport axios, { AxiosResponse } from 'axios';\n\nconst service = axios.create({\n  withCredentials: true,\n  timeout: 7000,\n});\n\nconst requestHandler = function (config: Record<any, any>) {\n  return config;\n};\n\nconst responseHandler = function (response: AxiosResponse) {\n  return response;\n};\n\nservice.interceptors.request.use(requestHandler);\nservice.interceptors.response.use(responseHandler);\n\nexport default {\n  install(app: App) {\n    app.provide('request', service);\n  },\n};\n","<template>\n  <magic-ui-page :config=\"pageConfig\"></magic-ui-page>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, inject, reactive } from 'vue';\n\nimport Core from '@tmagic/core';\n\nexport default defineComponent({\n  name: 'App',\n\n  setup() {\n    const app = inject<Core | undefined>('app');\n    const pageConfig = reactive(app?.page?.data || {});\n\n    return {\n      pageConfig,\n    };\n  },\n});\n</script>\n\n<style lang=\"scss\">\nhtml,\nbody,\n#app {\n  width: 100%;\n  height: 100%;\n}\n\n#app {\n  position: relative;\n  overflow: auto;\n}\n</style>\n","/*\n * Tencent is pleased to support the open source community by making TMagicEditor available.\n *\n * Copyright (C) 2021 THL A29 Limited, a Tencent company.  All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createApp } from 'vue';\n\nimport Core from '@tmagic/core';\nimport { getUrlParam } from '@tmagic/utils';\n\nimport entry from '../comp-entry';\nimport { getLocalConfig } from '../utils';\nimport request from '../utils/request';\n\nimport AppComponent from './App.vue';\n\nconst magicApp = createApp(AppComponent);\n\nmagicApp.use(request);\n\nObject.values(entry.components).forEach((component: any) => {\n  magicApp.component(component.name, component);\n});\n\nObject.values(entry.plugins).forEach((plugin: any) => {\n  magicApp.use(plugin);\n});\n\nconst app = new Core({\n  config: ((getUrlParam('localPreview') ? getLocalConfig() : window.magicUiConfig) || [])[0] || {},\n  curPage: getUrlParam('page'),\n});\n\nmagicApp.config.globalProperties.app = app;\nmagicApp.provide('app', app);\n\nmagicApp.mount('#app');\n"],"names":[],"mappings":";;;;MAoBa,iBAAiB,MAAc;QACpC,YAAY,aAAa,QAAQ;MACnC,CAAC;WAAkB;MACnB;WAEK,CAAC,KAAK,IAAI;AAAA,WACV;WACA;AAAA;AAAA;ACNX,MAAM,UAAU,MAAM,OAAO;AAAA,EAC3B,iBAAiB;AAAA,EACjB,SAAS;AAAA;AAGX,MAAM,iBAAiB,SAAU,QAA0B;SAClD;AAAA;AAGT,MAAM,kBAAkB,SAAU,UAAyB;SAClD;AAAA;AAGT,QAAQ,aAAa,QAAQ,IAAI;AACjC,QAAQ,aAAa,SAAS,IAAI;AAElC,cAAe;AAAA,EACb,QAAQ,MAAU;SACZ,QAAQ,WAAW;AAAA;AAAA;;AC9B3B,kBAAkB;;;;iBAIF;uBACO;;;;;;;;;;;ACevB,iBAAiB;AAEjB;AAEA;;;AAIA;;;AAIA;;;;AAKA;AACA;AAEA;"}